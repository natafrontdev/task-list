(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,a){e.exports=a(51)},39:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(27),s=a.n(c),o=a(10),i=a(53),l=a(56),u=a(55),m=a(4),d=a(5),p=a(7),h=a(6),f=a(8),g=r.a.createContext(),b=g.Provider,E=g.Consumer,v=function(){return function(e){return function(t){return r.a.createElement(E,null,function(a){return r.a.createElement(e,Object.assign({},t,{taskstoreService:a}))})}}},k=function(e){return{type:"UNAUTH_USER",payload:e}},O=function(e,t){return function(a,n){t({type:"FETCH_TASKS_REQUEST"}),e.getTasks(a,n).then(function(e){return t(function(e,t,a){return{type:"FETCH_TASKS_SUCCESS",payload:e,currentPage:t,sortField:a}}(e,a,n))}).catch(function(e){return t({type:"FETCH_TASKS_FAILURE",payload:e})})}},j=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}},C=a(52),N=(a(39),function(e){var t=e.isLoggedIn,a=e.onUnAuth;return t?r.a.createElement(C.a,{to:"/"},r.a.createElement("div",{onClick:a,className:"btn btn-outline-primary"},"\u0412\u044b\u0439\u0442\u0438")):r.a.createElement(C.a,{to:"/login"},r.a.createElement("div",{className:"btn btn-outline-primary"},"\u0412\u043e\u0439\u0442\u0438"))}),y=function(e){var t=e.isLoggedIn,a=e.onUnAuth;return r.a.createElement("header",{className:"task-list-header row"},r.a.createElement("div",{className:"col-6"},r.a.createElement(C.a,{to:"/",className:"logo text-dark"},"\u0421\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u0434\u0430\u0447")),r.a.createElement("div",{className:"col-6 text-right"},r.a.createElement(N,{isLoggedIn:t,onUnAuth:a}),r.a.createElement(C.a,{to:"/create"},r.a.createElement("div",{className:"btn btn-primary"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443"))))},S=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleUnAuth=function(){a.props.unAuthUser(!1)},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.isLoggedIn;return r.a.createElement(y,{isLoggedIn:e,onUnAuth:this.handleUnAuth})}}]),t}(n.Component),T={unAuthUser:k},x=j(v(),Object(o.b)(function(e){return{isLoggedIn:e.isLoggedIn}},T))(S),P=function(e){var t=e.data,a=e.sortField,n=e.currentPage,c=e.onSort,s=t.map(function(e){var t=e.name,s=e.label,o=a===t?"btn-info":"btn-outline-secondary";return r.a.createElement("button",{key:t,type:"button",className:"btn ".concat(o),onClick:function(){return c(n,t)}},s)});return r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"btn-group"},s))},w=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).buttons=[{name:"id",label:"Default"},{name:"username",label:"Username"},{name:"email",label:"Email"},{name:"status",label:"Status"}],a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.sortField,a=e.currentPage,n=e.fetchTasks;return r.a.createElement(P,{data:this.buttons,sortField:t,currentPage:a,onSort:n})}}]),t}(n.Component),I=j(v(),Object(o.b)(function(e){return{currentPage:e.currentPage,sortField:e.sortField}},function(e,t){var a=t.taskstoreService;return{fetchTasks:O(a,e)}}))(w),L=function(){return r.a.createElement("div",null,"loading...")},F=function(){return r.a.createElement("div",null,"Error!")},U=(a(42),function(e){var t=e.task,a=e.isLoggedIn,n=t.id,c=t.username,s=t.email,o=t.text,i=t.status;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",null,r.a.createElement("h4",{className:"card-title"},c),r.a.createElement("h6",{className:"card-subtitle mb-2 text-muted"},s),r.a.createElement("p",{className:"card-text"},o)),10===i&&r.a.createElement("div",null,r.a.createElement("span",{className:"badge badge-success"},"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u043e!")),a&&r.a.createElement(C.a,{to:{pathname:"/edit/:id",id:n}},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c")))}),_=function(e){var t=e.tasks,a=e.isLoggedIn;return r.a.createElement(n.Fragment,null,t.map(function(e){return r.a.createElement("div",{className:"col-sm-4",key:e.id},r.a.createElement(U,{task:e,isLoggedIn:a}))}))},B=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchTasks(this.props.currentPage,this.props.sortField)}},{key:"render",value:function(){var e=this.props,t=e.tasks,a=e.isLoggedIn,n=e.loading,c=e.error;return n?r.a.createElement(L,null):c?r.a.createElement(F,null):t&&t.length?r.a.createElement(_,{tasks:t,isLoggedIn:a}):r.a.createElement("p",null,"\u0421\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u0434\u0430\u0447 \u043f\u0443\u0441\u0442")}}]),t}(n.Component),A=j(v(),Object(o.b)(function(e){return{tasks:e.tasks,isLoggedIn:e.isLoggedIn,currentPage:e.currentPage,sortField:e.sortField,loading:e.loading,error:e.error}},function(e,t){var a=t.taskstoreService;return{fetchTasks:O(a,e)}}))(B),R=function(e){var t=e.currentPage,a=e.itemsPerPage,n=e.totalTaskCount,c=e.handleFirstPageButtonClick,s=e.handleBackButtonClick,o=e.handleNextButtonClick,i=e.handleLastPageButtonClick;return r.a.createElement("nav",{"aria-label":"...",className:"col-12"},r.a.createElement("ul",{className:"pagination"},r.a.createElement("li",{className:"page-item"+(1===t&&" disabled")},r.a.createElement("span",{onClick:c,className:"page-link"},r.a.createElement("span",{"aria-hidden":"true"},"\u2190")," First")),r.a.createElement("li",{className:"page-item"+(1===t&&" disabled")},r.a.createElement("span",{className:"page-link",onClick:s},"Previous")),r.a.createElement("li",{className:"page-item"+(t>=Math.ceil(n/a)&&" disabled")},r.a.createElement("span",{className:"page-link",onClick:o},"Next")),r.a.createElement("li",{className:"page-item"+(t>=Math.ceil(n/a)&&" disabled")},r.a.createElement("span",{className:"page-link",onClick:i},"Last ",r.a.createElement("span",{"aria-hidden":"true"},"\u2192")))))},D=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).onChangePage=function(e){a.props.fetchTasks(Number(e),a.props.sortField)},a.handleFirstPageButtonClick=function(){a.onChangePage(1)},a.handleBackButtonClick=function(){a.onChangePage(a.props.currentPage-1)},a.handleNextButtonClick=function(){a.onChangePage(a.props.currentPage+1)},a.handleLastPageButtonClick=function(){a.onChangePage(Math.max(1,Math.ceil(a.props.totalTaskCount/a.props.itemsPerPage)))},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.currentPage,a=e.itemsPerPage,n=e.totalTaskCount;return r.a.createElement(R,{currentPage:t,itemsPerPage:a,totalTaskCount:n,handleFirstPageButtonClick:this.handleFirstPageButtonClick,handleBackButtonClick:this.handleBackButtonClick,handleNextButtonClick:this.handleNextButtonClick,handleLastPageButtonClick:this.handleLastPageButtonClick})}}]),t}(n.Component),H=j(v(),Object(o.b)(function(e){return{totalTaskCount:e.totalTaskCount,currentPage:e.currentPage,itemsPerPage:e.itemsPerPage,sortField:e.sortField}},function(e,t){var a=t.taskstoreService;return{fetchTasks:O(a,e)}}))(D),K=function(){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement(I,null)),r.a.createElement("div",{className:"row"},r.a.createElement(A,null)),r.a.createElement("div",{className:"row"},r.a.createElement(H,null)))},z=a(13),M=a(54),q=(a(43),function(e){var t=e.labelText,a=e.placeholder,c=e.name,s=e.value,o=e.type,i=e.pattern,l=e.title,u=e.isReadOnly,m="undefined"!==u&&u;return r.a.createElement(n.Fragment,null,r.a.createElement("label",{htmlFor:c},t),r.a.createElement("input",{className:"form-control",placeholder:a,id:c,name:c,value:"undefined"!==s?s:"",type:o,pattern:i,title:l||"",autoComplete:"on",required:!0,readOnly:m}))}),J=function(e){var t=e.onSubmit;e.isLoggedIn;return r.a.createElement("form",{id:"login-form",onSubmit:t},r.a.createElement("div",{className:"form-group"},r.a.createElement(q,{labelText:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",placeholder:"\u0418\u043c\u044f",name:"username",type:"text",pattern:"[a-zA-Z0-9._%+-]{1,15}",title:"Check yor name"})),r.a.createElement("div",{className:"form-group"},r.a.createElement(q,{labelText:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 \u043f\u0430\u0440\u043e\u043b\u044c",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",type:"password",pattern:"[0-9]{1,3}$",title:"Check your password"})),r.a.createElement("button",{className:"btn btn-success"},"\u0412\u043e\u0439\u0442\u0438"))},Q=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={authState:"pending"},a.handleSubmit=a.handleSubmit.bind(Object(z.a)(Object(z.a)(a))),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=new FormData(e.target),a=t.get("username"),n=t.get("password"),r="admin"===a&&"123"===n;r&&(this.props.authUser(r),this.setState({authState:"done"}))}},{key:"render",value:function(){var e=this.props.isLoggedIn;return"done"===this.state.authState?r.a.createElement(M.a,{to:"/"}):r.a.createElement(J,{onSubmit:this.handleSubmit,isLoggedIn:e})}}]),t}(n.Component),Z={authUser:function(e){return{type:"AUTH_USER",payload:e}},unAuthUser:k},$=j(v(),Object(o.b)(function(e){return{isLoggedIn:e.isLoggedIn}},Z))(Q),V=function(){return r.a.createElement($,null)},G=function(e){var t=e.labelText,a=e.placeholder,c=e.name,s=e.value,o=e.maxLength;return r.a.createElement(n.Fragment,null,r.a.createElement("label",{htmlFor:c},t),r.a.createElement("textarea",{className:"form-control",placeholder:a,id:c,name:c,defaultValue:"undefined"!==s?s:"",maxLength:o,required:!0}))},W=function(e){var t=e.isUserName;return t?r.a.createElement(q,{labelText:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",name:"username",value:t,type:"text",isReadOnly:!0}):r.a.createElement(q,{labelText:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",placeholder:"\u0418\u043c\u044f",name:"username",type:"text",pattern:"[a-zA-Z0-9._%+-]{1,15}",title:"Name must be no more than 15 characters."})},X=function(e){var t=e.onSubmit,a=e.isLoggedIn,n=e.userName,c=a?n:"";return r.a.createElement("form",{id:"task-create-form",onSubmit:t},r.a.createElement("div",{className:"form-group"},r.a.createElement(W,{isUserName:c})),r.a.createElement("div",{className:"form-group"},r.a.createElement(q,{labelText:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 e-mail",placeholder:"e-mail",name:"email",type:"email",pattern:"^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$",title:"Check your email"})),r.a.createElement("div",{className:"form-group"},r.a.createElement(G,{labelText:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u0437\u0430\u0434\u0430\u0447\u0438",placeholder:"\u0422\u0435\u043a\u0441\u0442",name:"text",maxLength:"100"})),r.a.createElement("button",{className:"btn btn-success"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443!"))},Y=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=new FormData(e.target);a.props.taskstoreService.postNewTask(t),document.getElementById("task-create-form").reset()},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isLoggedIn,a=e.userName;return r.a.createElement(X,{onSubmit:this.handleSubmit,isLoggedIn:t,userName:a})}}]),t}(n.Component),ee=j(v(),Object(o.b)(function(e){return{isLoggedIn:e.isLoggedIn,userName:e.userName}}))(Y),te=function(){return r.a.createElement(ee,null)},ae=a(29),ne=a.n(ae),re=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={status:a.props.editTaskStatus},a.handleChecked=function(){return a.setState(function(e){return{status:0===e.status?10:0}})},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onSubmit,a=e.editTaskText;return r.a.createElement("form",{id:"task-edit-form",onSubmit:t},r.a.createElement("div",{className:"form-group"},r.a.createElement(G,{labelText:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u0435\u043a\u0441\u0442 \u0437\u0430\u0434\u0430\u0447\u0438",name:"text",maxLength:"100",value:a})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",onChange:this.handleChecked,checked:this.state.status}),"\xa0 \u0417\u0430\u0434\u0430\u0447\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u0430")),r.a.createElement("input",{type:"hidden",name:"status",value:this.state.status}),r.a.createElement("button",{className:"btn btn-success"},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443"))}}]),t}(n.Component),ce=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={isEdit:!1},a.encodeURI=function(e){return encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")},a.handleSubmit=function(e){e.preventDefault();var t=new FormData(e.target),n=a.encodeURI(t.get("text")),r="status="+a.encodeURI(t.get("status"))+"&text="+n+"&token="+a.encodeURI("beejee"),c=ne.a.create();c.update(r);var s=r+"&signature="+c;a.props.taskstoreService.editTask(a.props.editTask.id,s),a.setState(function(e){e.isEdit;return{isEdit:!0}})},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isLoggedIn,a=e.userName,n=e.editTask;return t?this.state.isEdit?r.a.createElement(M.a,{to:"/"}):r.a.createElement(re,{onSubmit:this.handleSubmit,isLoggedIn:t,userName:a,editTaskText:n.text,editTaskStatus:n.status}):r.a.createElement("div",null,"\u0427\u0442\u043e\u0431\u044b \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0438 \u043d\u0443\u0436\u043d\u043e\xa0",r.a.createElement(C.a,{to:"/login"},"\u0432\u043e\u0439\u0442\u0438"))}}]),t}(n.Component),se=j(v(),Object(o.b)(function(e,t){return{isLoggedIn:e.isLoggedIn,userName:e.userName,editTask:e.tasks.find(function(e){return e.id===t.taskEditId})}}))(ce),oe=function(e){var t=e.location.id;return r.a.createElement(se,{taskEditId:t})},ie=function(){return r.a.createElement("main",{role:"main",className:"container"},r.a.createElement(x,null),r.a.createElement(l.a,null,r.a.createElement(u.a,{path:"/",component:K,exact:!0}),r.a.createElement(u.a,{path:"/login",component:V}),r.a.createElement(u.a,{path:"/create",component:te}),r.a.createElement(u.a,{path:"/edit/:id",component:oe})))},le=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={hasError:!1},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement(F,null):this.props.children}}]),t}(n.Component),ue=a(12),me=a.n(ue),de=a(16),pe=a(19),he=a(17),fe={tasks:[],totalTaskCount:0,currentPage:1,itemsPerPage:3,sortField:"id",loading:!0,error:null,isLoggedIn:!1,userName:"admin"},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_TASKS_REQUEST":return Object(he.a)({},e,{tasks:[],loading:!0,error:null});case"FETCH_TASKS_SUCCESS":return Object(he.a)({},e,{tasks:t.payload.tasks,totalTaskCount:t.payload.total_task_count,currentPage:t.currentPage,sortField:t.sortField,loading:!1,error:null});case"FETCH_TASKS_FAILURE":return Object(he.a)({},e,{tasks:[],loading:!1,error:t.payload});case"AUTH_USER":case"UNAUTH_USER":return Object(he.a)({},e,{isLoggedIn:t.payload});default:return e}},be=Object(pe.b)(ge),Ee=new function e(){var t=this;Object(m.a)(this,e),this._apiBase="https://uxcandy.com/~shapoval/test-task-backend",this._apiDeveloper="?developer=Natalia",this.getResource=function(){var e=Object(de.a)(me.a.mark(function e(a){var n;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t._apiBase).concat(a),{cache:"no-cache",redirect:"follow",referrer:"no-referrer"});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(a)+", received ".concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this.postResource=function(){var e=Object(de.a)(me.a.mark(function e(a,n){var r;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t._apiBase).concat(a).concat(t._apiDeveloper),{method:"POST",body:n});case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(a)+", received ".concat(r.status));case 5:return e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),this.editResource=function(){var e=Object(de.a)(me.a.mark(function e(a,n){var r;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t._apiBase).concat(a).concat(t._apiDeveloper),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded"},redirect:"follow",referrer:"no-referrer",body:n});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),this.getTasks=function(){var e=Object(de.a)(me.a.mark(function e(a,n){var r;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/".concat(t._apiDeveloper,"&page=").concat(a,"&sort_field=").concat(n));case 2:return r=e.sent,e.abrupt("return",r.message);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),this.postNewTask=function(){var e=Object(de.a)(me.a.mark(function e(a){var n;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.postResource("/create",a);case 2:return n=e.sent,e.abrupt("return",n.results);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this.editTask=function(){var e=Object(de.a)(me.a.mark(function e(a,n){var r;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.editResource("/edit/".concat(a),n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()};s.a.render(r.a.createElement(o.a,{store:be},r.a.createElement(le,null,r.a.createElement(b,{value:Ee},r.a.createElement(i.a,{basename:"/task-list"},r.a.createElement(ie,null))))),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.59f6a640.chunk.js.map